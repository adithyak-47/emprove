(()=>{var e={970:(e,s,r)=>{r(860);const i=r(185),n=new i.Schema({name:String,password:String,users:[String]}),t=i.model("Admin",n);e.exports=t},638:(e,s,r)=>{r(860);const i=r(185),n=new i.Schema({name:{type:String,required:!0},description:String,deadline:String,assignedTo:String,completed:Boolean}),t=i.model("Task",n);e.exports=t},590:(e,s,r)=>{r(860);const i=r(185),n=new i.Schema({name:{type:String,required:!0},email:{type:String,required:!0},password:{type:String,required:!0}}),t=i.model("User",n);e.exports=t},986:e=>{"use strict";e.exports=require("body-parser")},860:e=>{"use strict";e.exports=require("express")},490:e=>{"use strict";e.exports=require("md5")},185:e=>{"use strict";e.exports=require("mongoose")}},s={};function r(i){var n=s[i];if(void 0!==n)return n.exports;var t=s[i]={exports:{}};return e[i](t,t.exports,r),t.exports}(()=>{const e=r(185),s=r(860),i=r(986),n=r(490),t=r(638),o=r(590),d=r(970),a=s();var p;a.set("view engine","ejs"),a.set("views","./views"),a.use(s.static("public")),a.use(i.json()),a.use(i.urlencoded({extended:!0})),e.connect("mongodb://127.0.0.1:27017/emprove"),a.get("/tasks",((e,s)=>{t.find(((e,r)=>{if(e)return console.error(e);s.send(r)}))})),a.get("/",((e,s)=>{s.sendFile(__dirname+"/public/home.html")})),a.post("/sign-up",((e,s)=>{new o({name:e.body.name,email:e.body.email,password:n(e.body.password)}).save((r=>{r?s.redirect("sign-up.html"):(d.findOne({email:"admin@gmail.com"},((s,r)=>{r&&(r.users.push(e.body.email),r.save())})),s.redirect("home.html"))}))})),a.post("/sign-in",((e,s)=>{let r=e.body.email,i=n(e.body.password);o.findOne({email:r},((e,n)=>{e&&s.redirect("sign-in.html"),n&&(n.password===i?(p=r,s.render("dashboard")):s.redirect("sign-in.html"))}))})),a.get("/dashboard",((e,s)=>{s.render("dashboard")})),a.get("/api/tasks",((e,s)=>{t.find({assignedTo:p},((e,r)=>{r&&s.json(r)}))})),a.get("/api/users",((e,s)=>{o.findOne({email:p},((e,r)=>{r&&s.json(r)}))})),a.post("/create-task",((e,s)=>{t.create({name:e.body.name,description:e.body.description,deadline:e.body.deadline,assignedTo:p},((e,r)=>{e||s.send(r)}))})),a.listen(3e3,(()=>{console.log("Server is listening on port 3000")}))})()})();